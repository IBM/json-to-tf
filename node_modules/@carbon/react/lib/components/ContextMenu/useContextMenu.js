/**
 * Copyright IBM Corp. 2016, 2023
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _rollupPluginBabelHelpers = require('../../_virtual/_rollupPluginBabelHelpers.js');
var React = require('react');

/**
 * @param {Element|Document|Window|object} [trigger=document] The element or ref which should trigger the Menu on right-click
 * @returns {object} Props object to pass onto Menu component
 */

function useContextMenu() {
  var trigger = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;

  var _useState = React.useState(false),
      _useState2 = _rollupPluginBabelHelpers.slicedToArray(_useState, 2),
      open = _useState2[0],
      setOpen = _useState2[1];

  var _useState3 = React.useState([0, 0]),
      _useState4 = _rollupPluginBabelHelpers.slicedToArray(_useState3, 2),
      position = _useState4[0],
      setPosition = _useState4[1];

  function openContextMenu(e) {
    e.preventDefault();
    var x = e.x,
        y = e.y;
    setPosition([x, y]);
    setOpen(true);
  }

  function onClose() {
    setOpen(false);
  }

  React.useEffect(function () {
    var _trigger$current;

    var el = (_trigger$current = trigger === null || trigger === void 0 ? void 0 : trigger.current) !== null && _trigger$current !== void 0 ? _trigger$current : trigger;

    if (el && el instanceof Element || el instanceof Document || el instanceof Window) {
      el.addEventListener('contextmenu', openContextMenu);
      return function () {
        el.removeEventListener('contextmenu', openContextMenu);
      };
    }
  }, [trigger]);
  return {
    open: open,
    x: position[0],
    y: position[1],
    onClose: onClose
  };
}

exports["default"] = useContextMenu;
